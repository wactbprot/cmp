<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cmp.st-mem documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cmp</span> <span class="project-version">0.6.3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cmp</span></div></div></li><li class="depth-2 branch"><a href="cmp.build.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build</span></div></a></li><li class="depth-2 branch"><a href="cmp.check.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>check</span></div></a></li><li class="depth-2 branch"><a href="cmp.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="cmp.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="cmp.ctrl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctrl</span></div></a></li><li class="depth-2 branch"><a href="cmp.doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>doc</span></div></a></li><li class="depth-2 branch"><a href="cmp.excep.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>excep</span></div></a></li><li class="depth-2 branch"><a href="cmp.exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exchange</span></div></a></li><li class="depth-2 branch"><a href="cmp.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2 branch"><a href="cmp.lt-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lt-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.resp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resp</span></div></a></li><li class="depth-2 branch current"><a href="cmp.st-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>st-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="cmp.task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task</span></div></a></li><li class="depth-2 branch"><a href="cmp.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch"><a href="cmp.work.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>work</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>worker</span></div></div></li><li class="depth-3 branch"><a href="cmp.worker.modbus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>modbus</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.select.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>select</span></div></a></li><li class="depth-3"><a href="cmp.worker.wait.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wait</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cmp.st-mem.html#var-clear"><div class="inner"><span>clear</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-close-listener.21"><div class="inner"><span>close-listener!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-conn"><div class="inner"><span>conn</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-de-register.21"><div class="inner"><span>de-register!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-del-key.21"><div class="inner"><span>del-key!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-del-keys.21"><div class="inner"><span>del-keys!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-filter-keys-where-val"><div class="inner"><span>filter-keys-where-val</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-gen-listener"><div class="inner"><span>gen-listener</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-gen-reg-key"><div class="inner"><span>gen-reg-key</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-gen-subs-pat"><div class="inner"><span>gen-subs-pat</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-ctrl-path"><div class="inner"><span>get-cont-ctrl-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-defin-path"><div class="inner"><span>get-cont-defin-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-descr-path"><div class="inner"><span>get-cont-descr-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-elem-path"><div class="inner"><span>get-cont-elem-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-prefix"><div class="inner"><span>get-cont-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-state-path"><div class="inner"><span>get-cont-state-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-cont-title-path"><div class="inner"><span>get-cont-title-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-class-path"><div class="inner"><span>get-defins-class-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-cond-path"><div class="inner"><span>get-defins-cond-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-ctrl-path"><div class="inner"><span>get-defins-ctrl-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-defin-path"><div class="inner"><span>get-defins-defin-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-descr-path"><div class="inner"><span>get-defins-descr-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-prefix"><div class="inner"><span>get-defins-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-defins-state-path"><div class="inner"><span>get-defins-state-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-exch-path"><div class="inner"><span>get-exch-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-exch-prefix"><div class="inner"><span>get-exch-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-id-path"><div class="inner"><span>get-id-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-meta-descr-path"><div class="inner"><span>get-meta-descr-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-meta-name-path"><div class="inner"><span>get-meta-name-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-meta-ncont-path"><div class="inner"><span>get-meta-ncont-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-meta-ndefins-path"><div class="inner"><span>get-meta-ndefins-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-meta-prefix"><div class="inner"><span>get-meta-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-meta-std-path"><div class="inner"><span>get-meta-std-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Ekeys"><div class="inner"><span>key-&gt;keys</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Eval"><div class="inner"><span>key-&gt;val</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-listeners"><div class="inner"><span>listeners</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-msg-.3Ekey"><div class="inner"><span>msg-&gt;key</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-pat-.3Ekeys"><div class="inner"><span>pat-&gt;keys</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-register.21"><div class="inner"><span>register!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-registered.3F"><div class="inner"><span>registered?</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-same-val.21"><div class="inner"><span>set-same-val!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-val.21"><div class="inner"><span>set-val!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cmp.st-mem</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-clear"><h3>clear</h3><div class="usage"><code>(clear x)</code></div><div class="doc"><div class="markdown"><p>Clears the key <code>k</code>. If <code>k</code> is a vector <code>(u/vec-&gt;key k)</code> is used for the conversion to a string.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L50">view source</a></div></div><div class="public anchor" id="var-close-listener.21"><h3>close-listener!</h3><div class="usage"><code>(close-listener! l)</code></div><div class="doc"><div class="markdown"><p>Closes the given listener generated by <a href="cmp.st-mem.html#var-gen-listener">gen-listener</a>.</p>
<pre><code class="clojure">;; generate
(def l (gen-listener "ref" "ctrl" msg-&gt;key))
;; close 
(close-listener! l)
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L265">view source</a></div></div><div class="public anchor" id="var-conn"><h3>conn</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L9">view source</a></div></div><div class="public anchor" id="var-de-register.21"><h3>de-register!</h3><div class="usage"><code>(de-register! mp-id struct no op)</code></div><div class="doc"><div class="markdown"><p>De-registers the listener with the key <code>mp-id</code> in the <code>listeners</code> atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L315">view source</a></div></div><div class="public anchor" id="var-del-key.21"><h3>del-key!</h3><div class="usage"><code>(del-key! k)</code></div><div class="doc"><div class="markdown"><p>Delets the key <code>k</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L40">view source</a></div></div><div class="public anchor" id="var-del-keys.21"><h3>del-keys!</h3><div class="usage"><code>(del-keys! ks)</code></div><div class="doc"><div class="markdown"><p>Deletes all given keys (<code>ks</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L45">view source</a></div></div><div class="public anchor" id="var-filter-keys-where-val"><h3>filter-keys-where-val</h3><div class="usage"><code>(filter-keys-where-val pat x)</code></div><div class="doc"><div class="markdown"><p>Returns all keys belonging to <code>pat</code> where the value is <code>x</code>.</p>
<pre><code class="clojure">(filter-keys-where-val "ref@definitions@*@class" "wait")
;; ("ref@definitions@0@class"
;; "ref@definitions@2@class"
;; "ref@definitions@1@class")
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L70">view source</a></div></div><div class="public anchor" id="var-gen-listener"><h3>gen-listener</h3><div class="usage"><code>(gen-listener mp-id l2 l3 l4 callback)</code></div><div class="doc"><div class="markdown"><p>Returns a listener for published keyspace notifications. Don’t forget to <a href="cmp.st-mem.html#var-close-listener.21">close-listener!</a></p>
<pre><code class="clojure">;; generate and close
(close-listener! (gen-listener "ref" "ctrl" msg-&gt;key))
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L251">view source</a></div></div><div class="public anchor" id="var-gen-reg-key"><h3>gen-reg-key</h3><div class="usage"><code>(gen-reg-key mp-id struct no op)</code></div><div class="doc"><div class="markdown"><p>generates a registration key for the listener atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L287">view source</a></div></div><div class="public anchor" id="var-gen-subs-pat"><h3>gen-subs-pat</h3><div class="usage"><code>(gen-subs-pat mp-id l2 l3 l4)</code></div><div class="doc"><div class="markdown"><p>Generates subscribe patterns which matches depending on:</p>
<p><strong>l2</strong></p>
<ul>
  <li><code>container</code></li>
  <li><code>definitions</code></li>
</ul>
<p><strong>l3</strong></p>
<ul>
  <li><code>0</code> … <code>n</code></li>
</ul>
<p><strong>l4</strong></p>
<ul>
  <li><code>ctrl</code></li>
  <li><code>state</code></li>
  <li><code>definition</code></li>
</ul></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L226">view source</a></div></div><div class="public anchor" id="var-get-cont-ctrl-path"><h3>get-cont-ctrl-path</h3><div class="usage"><code>(get-cont-ctrl-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L113">view source</a></div></div><div class="public anchor" id="var-get-cont-defin-path"><h3>get-cont-defin-path</h3><div class="usage"><code>(get-cont-defin-path p i)</code><code>(get-cont-defin-path p i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L121">view source</a></div></div><div class="public anchor" id="var-get-cont-descr-path"><h3>get-cont-descr-path</h3><div class="usage"><code>(get-cont-descr-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L109">view source</a></div></div><div class="public anchor" id="var-get-cont-elem-path"><h3>get-cont-elem-path</h3><div class="usage"><code>(get-cont-elem-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L117">view source</a></div></div><div class="public anchor" id="var-get-cont-prefix"><h3>get-cont-prefix</h3><div class="usage"><code>(get-cont-prefix p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L101">view source</a></div></div><div class="public anchor" id="var-get-cont-state-path"><h3>get-cont-state-path</h3><div class="usage"><code>(get-cont-state-path p i)</code><code>(get-cont-state-path p i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L127">view source</a></div></div><div class="public anchor" id="var-get-cont-title-path"><h3>get-cont-title-path</h3><div class="usage"><code>(get-cont-title-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L105">view source</a></div></div><div class="public anchor" id="var-get-defins-class-path"><h3>get-defins-class-path</h3><div class="usage"><code>(get-defins-class-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L164">view source</a></div></div><div class="public anchor" id="var-get-defins-cond-path"><h3>get-defins-cond-path</h3><div class="usage"><code>(get-defins-cond-path p i j)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L152">view source</a></div></div><div class="public anchor" id="var-get-defins-ctrl-path"><h3>get-defins-ctrl-path</h3><div class="usage"><code>(get-defins-ctrl-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L156">view source</a></div></div><div class="public anchor" id="var-get-defins-defin-path"><h3>get-defins-defin-path</h3><div class="usage"><code>(get-defins-defin-path p i)</code><code>(get-defins-defin-path p i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L140">view source</a></div></div><div class="public anchor" id="var-get-defins-descr-path"><h3>get-defins-descr-path</h3><div class="usage"><code>(get-defins-descr-path p i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L160">view source</a></div></div><div class="public anchor" id="var-get-defins-prefix"><h3>get-defins-prefix</h3><div class="usage"><code>(get-defins-prefix p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L136">view source</a></div></div><div class="public anchor" id="var-get-defins-state-path"><h3>get-defins-state-path</h3><div class="usage"><code>(get-defins-state-path p i)</code><code>(get-defins-state-path p i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L146">view source</a></div></div><div class="public anchor" id="var-get-exch-path"><h3>get-exch-path</h3><div class="usage"><code>(get-exch-path mp-id s)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>exchange</code> path (key).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L93">view source</a></div></div><div class="public anchor" id="var-get-exch-prefix"><h3>get-exch-prefix</h3><div class="usage"><code>(get-exch-prefix mp-id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>exchange</code> prefix.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L88">view source</a></div></div><div class="public anchor" id="var-get-id-path"><h3>get-id-path</h3><div class="usage"><code>(get-id-path p id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L171">view source</a></div></div><div class="public anchor" id="var-get-meta-descr-path"><h3>get-meta-descr-path</h3><div class="usage"><code>(get-meta-descr-path p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L190">view source</a></div></div><div class="public anchor" id="var-get-meta-name-path"><h3>get-meta-name-path</h3><div class="usage"><code>(get-meta-name-path p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L186">view source</a></div></div><div class="public anchor" id="var-get-meta-ncont-path"><h3>get-meta-ncont-path</h3><div class="usage"><code>(get-meta-ncont-path p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L194">view source</a></div></div><div class="public anchor" id="var-get-meta-ndefins-path"><h3>get-meta-ndefins-path</h3><div class="usage"><code>(get-meta-ndefins-path p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L198">view source</a></div></div><div class="public anchor" id="var-get-meta-prefix"><h3>get-meta-prefix</h3><div class="usage"><code>(get-meta-prefix p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L178">view source</a></div></div><div class="public anchor" id="var-get-meta-std-path"><h3>get-meta-std-path</h3><div class="usage"><code>(get-meta-std-path p)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L182">view source</a></div></div><div class="public anchor" id="var-key-.3Ekeys"><h3>key-&gt;keys</h3><div class="usage"><code>(key-&gt;keys k)</code></div><div class="doc"><div class="markdown"><p>Get all keys matching <code>k*</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L32">view source</a></div></div><div class="public anchor" id="var-key-.3Eval"><h3>key-&gt;val</h3><div class="usage"><code>(key-&gt;val k)</code></div><div class="doc"><div class="markdown"><p>Returns the value for the given key (<code>k</code>) and cast it to a clojure type.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L64">view source</a></div></div><div class="public anchor" id="var-listeners"><h3>listeners</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Listener has the form <code>(atom {})</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L280">view source</a></div></div><div class="public anchor" id="var-msg-.3Ekey"><h3>msg-&gt;key</h3><div class="usage"><code>(msg-&gt;key [kind l1 l2 l3])</code></div><div class="doc"><div class="markdown"><p>Extracts the key from a published keyspace notification message (<code>pmessage</code>).</p>
<pre><code class="clojure">(def msg ["pmessage"
         "__keyspace@0*__:ref@*@*@ctrl*"
         "__keyspace@0__:ref@container@0@ctrl"
         "set"])
(st/msg-&gt;key msg)
;; "ref@container@0@ctrl"
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L205">view source</a></div></div><div class="public anchor" id="var-pat-.3Ekeys"><h3>pat-&gt;keys</h3><div class="usage"><code>(pat-&gt;keys pat)</code></div><div class="doc"><div class="markdown"><p>Get all keys matching the given pattern <code>pat</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L27">view source</a></div></div><div class="public anchor" id="var-register.21"><h3>register!</h3><div class="usage"><code>(register! mp-id struct no op callback)</code></div><div class="doc"><div class="markdown"><p>Generates a <code>ctrl</code> listener and registers him under the key <code>mp-id</code> in the <code>listeners</code> atom. The callback function dispatches depending on the result.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L298">view source</a></div></div><div class="public anchor" id="var-registered.3F"><h3>registered?</h3><div class="usage"><code>(registered? reg-key)</code></div><div class="doc"><div class="markdown"><p>Checks if a <code>listener</code> is registered under the <code>listeners</code>-atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L292">view source</a></div></div><div class="public anchor" id="var-set-same-val.21"><h3>set-same-val!</h3><div class="usage"><code>(set-same-val! ks v)</code></div><div class="doc"><div class="markdown"><p>Sets the given values (<code>val</code>) for all keys (<code>ks</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L20">view source</a></div></div><div class="public anchor" id="var-set-val.21"><h3>set-val!</h3><div class="usage"><code>(set-val! k v)</code></div><div class="doc"><div class="markdown"><p>Sets the value <code>v</code> for the key <code>k</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L15">view source</a></div></div></div></body></html>