<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cmp.st-mem documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cmp</span> <span class="project-version">0.4.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cmp</span></div></div></li><li class="depth-2 branch"><a href="cmp.build.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build</span></div></a></li><li class="depth-2 branch"><a href="cmp.check.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>check</span></div></a></li><li class="depth-2 branch"><a href="cmp.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="cmp.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="cmp.ctrl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctrl</span></div></a></li><li class="depth-2 branch"><a href="cmp.doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>doc</span></div></a></li><li class="depth-2 branch"><a href="cmp.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2 branch"><a href="cmp.lt-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lt-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.reg.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reg</span></div></a></li><li class="depth-2 branch current"><a href="cmp.st-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>st-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="cmp.task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task</span></div></a></li><li class="depth-2 branch"><a href="cmp.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><a href="cmp.work.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>work</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cmp.st-mem.html#var-clear"><div class="inner"><span>clear</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-close-listener.21"><div class="inner"><span>close-listener!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-conn"><div class="inner"><span>conn</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-del-key.21"><div class="inner"><span>del-key!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-del-keys.21"><div class="inner"><span>del-keys!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-gen-listener"><div class="inner"><span>gen-listener</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-gen-subs-pat"><div class="inner"><span>gen-subs-pat</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-get-keys"><div class="inner"><span>get-keys</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Eval"><div class="inner"><span>key-&gt;val</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-msg-.3Ekey"><div class="inner"><span>msg-&gt;key</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-same-val.21"><div class="inner"><span>set-same-val!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-val.21"><div class="inner"><span>set-val!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cmp.st-mem</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-clear"><h3>clear</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Clears the key <code>k</code>. If <code>k</code> is a vector <code>(u/vec-&gt;key k)</code> is used for the conversion to a string.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L44">view source</a></div></div><div class="public anchor" id="var-close-listener.21"><h3>close-listener!</h3><div class="usage"><code>(close-listener! l)</code></div><div class="doc"><div class="markdown"><p>Closes the given listener generated by <a href="cmp.st-mem.html#var-gen-listener">gen-listener</a>.</p>
<pre><code class="clojure">;; generate
(def l (gen-listener "wait" "ctrl" msg-&gt;key))
;; close 
(close-listener! l)
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L118">view source</a></div></div><div class="public anchor" id="var-conn"><h3>conn</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L9">view source</a></div></div><div class="public anchor" id="var-del-key.21"><h3>del-key!</h3><div class="usage"><code>(del-key! k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L23">view source</a></div></div><div class="public anchor" id="var-del-keys.21"><h3>del-keys!</h3><div class="usage"><code>(del-keys! ks)</code></div><div class="doc"><div class="markdown"><p>Deletes all given keys (<code>ks</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L16">view source</a></div></div><div class="public anchor" id="var-gen-listener"><h3>gen-listener</h3><div class="usage"><code>(gen-listener mp-id l2 l3 l4 cb)</code></div><div class="doc"><div class="markdown"><p>Returns a listener for published keyspace notifications. Don’t forget to <a href="cmp.st-mem.html#var-close-listener.21">close-listener!</a></p>
<pre><code class="clojure">;; generate and close
(close-listener! (gen-listener "wait" "ctrl" msg-&gt;key))
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L104">view source</a></div></div><div class="public anchor" id="var-gen-subs-pat"><h3>gen-subs-pat</h3><div class="usage"><code>(gen-subs-pat mp-id l2 l3 l4)</code></div><div class="doc"><div class="markdown"><p>Generates subscribe patterns which matches depending on:</p>
<p><strong>l2</strong></p>
<ul>
  <li><code>container</code></li>
  <li><code>definitions</code></li>
</ul>
<p><strong>l3</strong></p>
<ul>
  <li><code>0</code> … <code>n</code></li>
</ul>
<p><strong>l4</strong></p>
<ul>
  <li><code>ctrl</code></li>
  <li><code>state</code></li>
  <li><code>definition</code></li>
</ul></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L79">view source</a></div></div><div class="public anchor" id="var-get-keys"><h3>get-keys</h3><div class="usage"><code>(get-keys p)</code></div><div class="doc"><div class="markdown"><p>Get all keys matching <code>p*</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L11">view source</a></div></div><div class="public anchor" id="var-key-.3Eval"><h3>key-&gt;val</h3><div class="usage"><code>(key-&gt;val k)</code></div><div class="doc"><div class="markdown"><p>Returns the value for the given key (<code>k</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L39">view source</a></div></div><div class="public anchor" id="var-msg-.3Ekey"><h3>msg-&gt;key</h3><div class="usage"><code>(msg-&gt;key [kind l1 l2 l3])</code></div><div class="doc"><div class="markdown"><p>Extracts the key from a published keyspace notification message.</p>
<pre><code class="clojure">(def msg ["pmessage"
         "__keyspace@0*__:wait@*@*@ctrl*"
         "__keyspace@0__:wait@container@0@ctrl"
         "set"])
(st/msg-&gt;key msg)
;; "wait@container@0@ctrl"
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L62">view source</a></div></div><div class="public anchor" id="var-set-same-val.21"><h3>set-same-val!</h3><div class="usage"><code>(set-same-val! ks v)</code></div><div class="doc"><div class="markdown"><p>Sets the given values (<code>val</code>) for all keys (<code>ks</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L32">view source</a></div></div><div class="public anchor" id="var-set-val.21"><h3>set-val!</h3><div class="usage"><code>(set-val! k v)</code></div><div class="doc"><div class="markdown"><p>Sets the value <code>v</code> for the key <code>k</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L27">view source</a></div></div></div></body></html>