<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cmp.st-mem documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/atom-one-dark.css" /><script type="text/javascript" src="highlight/highlight.pack.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with the <a href="https://github.com/clojang/codox-theme">Clojang UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cmp</span> <span class="project-version">0.11.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cmp</span></div></div></li><li class="depth-2 branch"><a href="cmp.build.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build</span></div></a></li><li class="depth-2 branch"><a href="cmp.check.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>check</span></div></a></li><li class="depth-2 branch"><a href="cmp.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="cmp.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="cmp.ctrl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctrl</span></div></a></li><li class="depth-2 branch"><a href="cmp.doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>doc</span></div></a></li><li class="depth-2 branch"><a href="cmp.exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exchange</span></div></a></li><li class="depth-2 branch"><a href="cmp.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2 branch"><a href="cmp.lt-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lt-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.resp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resp</span></div></a></li><li class="depth-2 branch current"><a href="cmp.st-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>st-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="cmp.task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task</span></div></a></li><li class="depth-2 branch"><a href="cmp.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch"><a href="cmp.work.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>work</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>worker</span></div></div></li><li class="depth-3 branch"><a href="cmp.worker.anselm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>anselm</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.devhub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>devhub</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.pre-script.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pre-script</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.read-exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-exchange</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.run-mp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run-mp</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.select.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>select</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.wait.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wait</span></div></a></li><li class="depth-3"><a href="cmp.worker.write-exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write-exchange</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cmp.st-mem.html#var-clear"><div class="inner"><span>clear</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-close-listener.21"><div class="inner"><span>close-listener!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-conn"><div class="inner"><span>conn</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-ctrl-path"><div class="inner"><span>cont-ctrl-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-defin-path"><div class="inner"><span>cont-defin-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-descr-path"><div class="inner"><span>cont-descr-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-elem-path"><div class="inner"><span>cont-elem-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-prefix"><div class="inner"><span>cont-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-state-path"><div class="inner"><span>cont-state-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-cont-title-path"><div class="inner"><span>cont-title-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-db"><div class="inner"><span>db</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-de-register.21"><div class="inner"><span>de-register!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-class-path"><div class="inner"><span>defins-class-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-cond-path"><div class="inner"><span>defins-cond-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-ctrl-path"><div class="inner"><span>defins-ctrl-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-defin-path"><div class="inner"><span>defins-defin-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-descr-path"><div class="inner"><span>defins-descr-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-prefix"><div class="inner"><span>defins-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-defins-state-path"><div class="inner"><span>defins-state-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-del-key.21"><div class="inner"><span>del-key!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-del-keys.21"><div class="inner"><span>del-keys!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-exch-path"><div class="inner"><span>exch-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-exch-prefix"><div class="inner"><span>exch-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-filter-keys-where-val"><div class="inner"><span>filter-keys-where-val</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-gen-listener"><div class="inner"><span>gen-listener</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-id-path"><div class="inner"><span>id-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-id-prefix"><div class="inner"><span>id-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Efunc"><div class="inner"><span>key-&gt;func</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Ekey-map"><div class="inner"><span>key-&gt;key-map</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Ekeys"><div class="inner"><span>key-&gt;keys</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Emp-id"><div class="inner"><span>key-&gt;mp-id</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Eno-idx"><div class="inner"><span>key-&gt;no-idx</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Eno-jdx"><div class="inner"><span>key-&gt;no-jdx</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Epar-idx"><div class="inner"><span>key-&gt;par-idx</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Eseq-idx"><div class="inner"><span>key-&gt;seq-idx</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Estruct"><div class="inner"><span>key-&gt;struct</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-key-.3Eval"><div class="inner"><span>key-&gt;val</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-keys-.3Evals"><div class="inner"><span>keys-&gt;vals</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-listeners"><div class="inner"><span>listeners</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-meta-descr-path"><div class="inner"><span>meta-descr-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-meta-name-path"><div class="inner"><span>meta-name-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-meta-ncont-path"><div class="inner"><span>meta-ncont-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-meta-ndefins-path"><div class="inner"><span>meta-ndefins-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-meta-prefix"><div class="inner"><span>meta-prefix</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-meta-std-path"><div class="inner"><span>meta-std-path</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-msg-.3Ekey"><div class="inner"><span>msg-&gt;key</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-mtp"><div class="inner"><span>mtp</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-pat-.3Ekeys"><div class="inner"><span>pat-&gt;keys</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-reg-key"><div class="inner"><span>reg-key</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-register.21"><div class="inner"><span>register!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-registered.3F"><div class="inner"><span>registered?</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-same-val.21"><div class="inner"><span>set-same-val!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-state.21"><div class="inner"><span>set-state!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-set-val.21"><div class="inner"><span>set-val!</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-state-key-.3Eresponse-key"><div class="inner"><span>state-key-&gt;response-key</span></div></a></li><li class="depth-1"><a href="cmp.st-mem.html#var-subs-pat"><div class="inner"><span>subs-pat</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cmp.st-mem</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-clear"><h3>clear</h3><div class="usage"><code>(clear x)</code></div><div class="doc"><div class="markdown"><p>Clears the key <code>x</code>. If <code>x</code> is a vector the function <code>u/vec-&gt;key</code> is used for the conversion of <code>x</code> to a string.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L75">view source</a></div></div><div class="public anchor" id="var-close-listener.21"><h3>close-listener!</h3><div class="usage"><code>(close-listener! l)</code></div><div class="doc"><div class="markdown"><p>Closes the given listener generated by <a href="cmp.st-mem.html#var-gen-listener">gen-listener</a>.</p>
<p>Example:</p>
<pre><code class="clojure">;; generate
(def l (gen-listener "ref" "ctrl" msg-&gt;key))
;; close 
(close-listener! l)
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L419">view source</a></div></div><div class="public anchor" id="var-conn"><h3>conn</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L9">view source</a></div></div><div class="public anchor" id="var-cont-ctrl-path"><h3>cont-ctrl-path</h3><div class="usage"><code>(cont-ctrl-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L258">view source</a></div></div><div class="public anchor" id="var-cont-defin-path"><h3>cont-defin-path</h3><div class="usage"><code>(cont-defin-path mp-id i)</code><code>(cont-defin-path mp-id i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L266">view source</a></div></div><div class="public anchor" id="var-cont-descr-path"><h3>cont-descr-path</h3><div class="usage"><code>(cont-descr-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L254">view source</a></div></div><div class="public anchor" id="var-cont-elem-path"><h3>cont-elem-path</h3><div class="usage"><code>(cont-elem-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L262">view source</a></div></div><div class="public anchor" id="var-cont-prefix"><h3>cont-prefix</h3><div class="usage"><code>(cont-prefix mp-id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>container</code> prefix.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L245">view source</a></div></div><div class="public anchor" id="var-cont-state-path"><h3>cont-state-path</h3><div class="usage"><code>(cont-state-path mp-id i)</code><code>(cont-state-path mp-id i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L272">view source</a></div></div><div class="public anchor" id="var-cont-title-path"><h3>cont-title-path</h3><div class="usage"><code>(cont-title-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L250">view source</a></div></div><div class="public anchor" id="var-db"><h3>db</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L10">view source</a></div></div><div class="public anchor" id="var-de-register.21"><h3>de-register!</h3><div class="usage"><code>(de-register! mp-id struct no func)</code><code>(de-register! mp-id struct no func level)</code></div><div class="doc"><div class="markdown"><p>De-registers the listener with the key <code>mp-id</code> in the <code>listeners</code> atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L470">view source</a></div></div><div class="public anchor" id="var-defins-class-path"><h3>defins-class-path</h3><div class="usage"><code>(defins-class-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L312">view source</a></div></div><div class="public anchor" id="var-defins-cond-path"><h3>defins-cond-path</h3><div class="usage"><code>(defins-cond-path mp-id i)</code><code>(defins-cond-path mp-id i j)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L298">view source</a></div></div><div class="public anchor" id="var-defins-ctrl-path"><h3>defins-ctrl-path</h3><div class="usage"><code>(defins-ctrl-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L304">view source</a></div></div><div class="public anchor" id="var-defins-defin-path"><h3>defins-defin-path</h3><div class="usage"><code>(defins-defin-path mp-id i)</code><code>(defins-defin-path mp-id i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L286">view source</a></div></div><div class="public anchor" id="var-defins-descr-path"><h3>defins-descr-path</h3><div class="usage"><code>(defins-descr-path mp-id i)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L308">view source</a></div></div><div class="public anchor" id="var-defins-prefix"><h3>defins-prefix</h3><div class="usage"><code>(defins-prefix mp-id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>definitions</code> prefix.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L281">view source</a></div></div><div class="public anchor" id="var-defins-state-path"><h3>defins-state-path</h3><div class="usage"><code>(defins-state-path mp-id i)</code><code>(defins-state-path mp-id i j k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L292">view source</a></div></div><div class="public anchor" id="var-del-key.21"><h3>del-key!</h3><div class="usage"><code>(del-key! k)</code></div><div class="doc"><div class="markdown"><p>Delets the key <code>k</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L65">view source</a></div></div><div class="public anchor" id="var-del-keys.21"><h3>del-keys!</h3><div class="usage"><code>(del-keys! ks)</code></div><div class="doc"><div class="markdown"><p>Deletes all given keys (<code>ks</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L70">view source</a></div></div><div class="public anchor" id="var-exch-path"><h3>exch-path</h3><div class="usage"><code>(exch-path mp-id s)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>exchange</code> path (key).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L237">view source</a></div></div><div class="public anchor" id="var-exch-prefix"><h3>exch-prefix</h3><div class="usage"><code>(exch-prefix mp-id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>exchange</code> prefix.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L231">view source</a></div></div><div class="public anchor" id="var-filter-keys-where-val"><h3>filter-keys-where-val</h3><div class="usage"><code>(filter-keys-where-val pat x)</code></div><div class="doc"><div class="markdown"><p>Returns a list of all keys belonging to the pattern <code>pat</code> where the value is equal to<code>x</code>.</p>
<p>Example:</p>
<pre><code class="clojure">(filter-keys-where-val "ref@definitions@*@class" "wait")
;; ("ref@definitions@0@class"
;; "ref@definitions@2@class"
;; "ref@definitions@1@class")
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L104">view source</a></div></div><div class="public anchor" id="var-gen-listener"><h3>gen-listener</h3><div class="usage"><code>(gen-listener mp-id l2 l3 l4 callback)</code></div><div class="doc"><div class="markdown"><p>Returns a listener for published keyspace notifications. Don’t forget to <a href="cmp.st-mem.html#var-close-listener.21">close-listener!</a></p>
<p>Example:</p>
<pre><code class="clojure">;; generate and close
(close-listener! (gen-listener "ref" "ctrl" msg-&gt;key))
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L404">view source</a></div></div><div class="public anchor" id="var-id-path"><h3>id-path</h3><div class="usage"><code>(id-path mp-id id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>id</code> key.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L324">view source</a></div></div><div class="public anchor" id="var-id-prefix"><h3>id-prefix</h3><div class="usage"><code>(id-prefix mp-id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>id</code> prefix.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L319">view source</a></div></div><div class="public anchor" id="var-key-.3Efunc"><h3>key-&gt;func</h3><div class="usage"><code>(key-&gt;func k)</code></div><div class="doc"><div class="markdown"><p>Returns the name of the <code>func</code>tion for the given key.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L173">view source</a></div></div><div class="public anchor" id="var-key-.3Ekey-map"><h3>key-&gt;key-map</h3><div class="usage"><code>(key-&gt;key-map k)</code></div><div class="doc"><div class="markdown"><p>Turns a key into a map.</p>
<p>Todo: use this concept everywhere!</p>
<p>Example:</p>
<pre><code class="clojure">(key-&gt;key-map "") 
;;{:mp-id nil,
;; :struct nil,
;; :no-idx nil,
;; :func nil,
;; :seq-idx nil,
;; :par-idx nil}
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L203">view source</a></div></div><div class="public anchor" id="var-key-.3Ekeys"><h3>key-&gt;keys</h3><div class="usage"><code>(key-&gt;keys k)</code></div><div class="doc"><div class="markdown"><p>Get all keys matching <code>k*</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L37">view source</a></div></div><div class="public anchor" id="var-key-.3Emp-id"><h3>key-&gt;mp-id</h3><div class="usage"><code>(key-&gt;mp-id k)</code></div><div class="doc"><div class="markdown"><p>Returns the name of the key space for the given key.</p>
<p>May be: * tasks * <mp-id></mp-id></p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L137">view source</a></div></div><div class="public anchor" id="var-key-.3Eno-idx"><h3>key-&gt;no-idx</h3><div class="usage"><code>(key-&gt;no-idx k)</code></div><div class="doc"><div class="markdown"><p>Returns an integer corresponding to the given key <code>container</code> or <code>definitions</code> index.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L165">view source</a></div></div><div class="public anchor" id="var-key-.3Eno-jdx"><h3>key-&gt;no-jdx</h3><div class="usage"><code>(key-&gt;no-jdx k)</code></div><div class="doc"><div class="markdown"><p>The 4th position at definitions has nothing todo with <code>seq-idx</code>. Hence a fn-rename</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L188">view source</a></div></div><div class="public anchor" id="var-key-.3Epar-idx"><h3>key-&gt;par-idx</h3><div class="usage"><code>(key-&gt;par-idx k)</code></div><div class="doc"><div class="markdown"><p>Returns an integer corresponding to the givens key parallel index.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L195">view source</a></div></div><div class="public anchor" id="var-key-.3Eseq-idx"><h3>key-&gt;seq-idx</h3><div class="usage"><code>(key-&gt;seq-idx k)</code></div><div class="doc"><div class="markdown"><p>Returns an integer corresponding to the givens key sequential index.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L180">view source</a></div></div><div class="public anchor" id="var-key-.3Estruct"><h3>key-&gt;struct</h3><div class="usage"><code>(key-&gt;struct k)</code></div><div class="doc"><div class="markdown"><p>Returns the name of the <code>struct</code>ure for the given key.</p>
<p>May be: * <taskname> * definitions * container</taskname></p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L152">view source</a></div></div><div class="public anchor" id="var-key-.3Eval"><h3>key-&gt;val</h3><div class="usage"><code>(key-&gt;val k)</code></div><div class="doc"><div class="markdown"><p>Returns the value for the given key (<code>k</code>) and cast it to a clojure type.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L92">view source</a></div></div><div class="public anchor" id="var-keys-.3Evals"><h3>keys-&gt;vals</h3><div class="usage"><code>(keys-&gt;vals ks)</code></div><div class="doc"><div class="markdown"><p>Returns a vector of the <code>vals</code> behind the keys <code>ks</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L98">view source</a></div></div><div class="public anchor" id="var-listeners"><h3>listeners</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L435">view source</a></div></div><div class="public anchor" id="var-meta-descr-path"><h3>meta-descr-path</h3><div class="usage"><code>(meta-descr-path mp-id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L345">view source</a></div></div><div class="public anchor" id="var-meta-name-path"><h3>meta-name-path</h3><div class="usage"><code>(meta-name-path mp-id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L341">view source</a></div></div><div class="public anchor" id="var-meta-ncont-path"><h3>meta-ncont-path</h3><div class="usage"><code>(meta-ncont-path mp-id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L349">view source</a></div></div><div class="public anchor" id="var-meta-ndefins-path"><h3>meta-ndefins-path</h3><div class="usage"><code>(meta-ndefins-path mp-id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L353">view source</a></div></div><div class="public anchor" id="var-meta-prefix"><h3>meta-prefix</h3><div class="usage"><code>(meta-prefix mp-id)</code></div><div class="doc"><div class="markdown"><p>Returns the <code>meta</code> prefix.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L332">view source</a></div></div><div class="public anchor" id="var-meta-std-path"><h3>meta-std-path</h3><div class="usage"><code>(meta-std-path mp-id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L337">view source</a></div></div><div class="public anchor" id="var-msg-.3Ekey"><h3>msg-&gt;key</h3><div class="usage"><code>(msg-&gt;key [kind l1 l2 l3])</code></div><div class="doc"><div class="markdown"><p>Extracts the <code>key</code> from a published keyspace notification message (<code>pmessage</code>).</p>
<p>Example:</p>
<pre><code class="clojure">(def msg ["pmessage"
         "__keyspace@0*__:ref@*@*@ctrl*"
         "__keyspace@0__:ref@container@0@ctrl"
         "set"])
(st/msg-&gt;key msg)
;; "ref@container@0@ctrl"
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L360">view source</a></div></div><div class="public anchor" id="var-mtp"><h3>mtp</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L11">view source</a></div></div><div class="public anchor" id="var-pat-.3Ekeys"><h3>pat-&gt;keys</h3><div class="usage"><code>(pat-&gt;keys pat)</code></div><div class="doc"><div class="markdown"><p>Get all keys matching the given pattern <code>pat</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L32">view source</a></div></div><div class="public anchor" id="var-reg-key"><h3>reg-key</h3><div class="usage"><code>(reg-key mp-id struct no func level)</code></div><div class="doc"><div class="markdown"><p>Generates a registration key for the listener atom. The <code>level</code> param allows to register more than one listener for one pattern.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L440">view source</a></div></div><div class="public anchor" id="var-register.21"><h3>register!</h3><div class="usage"><code>(register! mp-id struct no func cb!)</code><code>(register! mp-id struct no func cb! level)</code></div><div class="doc"><div class="markdown"><p>Generates and registers a listener under the key <code>mp-id</code> in the <code>listeners</code> atom. The cb! function dispatches depending on the result.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L453">view source</a></div></div><div class="public anchor" id="var-registered.3F"><h3>registered?</h3><div class="usage"><code>(registered? k)</code></div><div class="doc"><div class="markdown"><p>Checks if a <code>listener</code> is registered under the <code>listeners</code>-atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L447">view source</a></div></div><div class="public anchor" id="var-set-same-val.21"><h3>set-same-val!</h3><div class="usage"><code>(set-same-val! ks v)</code></div><div class="doc"><div class="markdown"><p>Sets the given values (<code>val</code>) for all keys (<code>ks</code>).</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L25">view source</a></div></div><div class="public anchor" id="var-set-state.21"><h3>set-state!</h3><div class="usage"><code>(set-state! k state msg)</code><code>(set-state! k state)</code></div><div class="doc"><div class="markdown"><p>Function is used by the workers to set state. The state is set with the delay <code>mtp</code>. An optional log message may be provided.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L45">view source</a></div></div><div class="public anchor" id="var-set-val.21"><h3>set-val!</h3><div class="usage"><code>(set-val! k v)</code></div><div class="doc"><div class="markdown"><p>Sets the value <code>v</code> for the key <code>k</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L16">view source</a></div></div><div class="public anchor" id="var-state-key-.3Eresponse-key"><h3>state-key-&gt;response-key</h3><div class="usage"><code>(state-key-&gt;response-key k)</code></div><div class="doc"><div class="markdown"><p>Turns the given <code>state-key</code> into a <code>response-key</code>.</p>
<pre><code class="clojure">(state-key-&gt;response-key "devs@container@0@state@0@0")
;; devs@container@0@response@0@0
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L122">view source</a></div></div><div class="public anchor" id="var-subs-pat"><h3>subs-pat</h3><div class="usage"><code>(subs-pat mp-id l2 l3 l4)</code></div><div class="doc"><div class="markdown"><p>Generates subscribe patterns which matches depending on:</p>
<p><strong>l2</strong></p>
<ul>
  <li><code>container</code></li>
  <li><code>definitions</code></li>
</ul>
<p><strong>l3</strong></p>
<ul>
  <li><code>0</code> … <code>n</code></li>
</ul>
<p><strong>l4</strong></p>
<ul>
  <li><code>ctrl</code></li>
  <li><code>state</code></li>
  <li><code>definition</code></li>
</ul></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/st_mem.clj#L379">view source</a></div></div></div></body></html>