<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cmp.exchange documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/atom-one-dark.css" /><script type="text/javascript" src="highlight/highlight.pack.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with the <a href="https://github.com/clojang/codox-theme">Clojang UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cmp</span> <span class="project-version">0.11.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cmp</span></div></div></li><li class="depth-2 branch"><a href="cmp.build.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build</span></div></a></li><li class="depth-2 branch"><a href="cmp.check.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>check</span></div></a></li><li class="depth-2 branch"><a href="cmp.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="cmp.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="cmp.ctrl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctrl</span></div></a></li><li class="depth-2 branch"><a href="cmp.doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>doc</span></div></a></li><li class="depth-2 branch current"><a href="cmp.exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exchange</span></div></a></li><li class="depth-2 branch"><a href="cmp.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2 branch"><a href="cmp.lt-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lt-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.resp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resp</span></div></a></li><li class="depth-2 branch"><a href="cmp.st-mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>st-mem</span></div></a></li><li class="depth-2 branch"><a href="cmp.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="cmp.task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task</span></div></a></li><li class="depth-2 branch"><a href="cmp.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch"><a href="cmp.work.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>work</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>worker</span></div></div></li><li class="depth-3 branch"><a href="cmp.worker.anselm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>anselm</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.devhub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>devhub</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.gen-db-doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gen-db-doc</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.get-date.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-date</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.get-time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-time</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.pre-script.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pre-script</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.read-exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-exchange</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.replicate-db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>replicate-db</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.run-mp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run-mp</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.select.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>select</span></div></a></li><li class="depth-3 branch"><a href="cmp.worker.wait.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wait</span></div></a></li><li class="depth-3"><a href="cmp.worker.write-exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write-exchange</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cmp.exchange.html#var-enclose-map"><div class="inner"><span>enclose-map</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-exch-key"><div class="inner"><span>exch-key</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-from.21"><div class="inner"><span>from!</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-key-.3Efirst-kw"><div class="inner"><span>key-&gt;first-kw</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-key-.3Esecond-kw"><div class="inner"><span>key-&gt;second-kw</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-ok.3F"><div class="inner"><span>ok?</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-read.21"><div class="inner"><span>read!</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-run-if"><div class="inner"><span>run-if</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-stop-if"><div class="inner"><span>stop-if</span></div></a></li><li class="depth-1"><a href="cmp.exchange.html#var-to.21"><div class="inner"><span>to!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cmp.exchange</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-enclose-map"><h3>enclose-map</h3><div class="usage"><code>(enclose-map m p)</code></div><div class="doc"><div class="markdown"><p>Encloses the given map <code>m</code> with respect to the path <code>p</code>.</p>
<p>Example:</p>
<pre><code class="clojure">(enclose-map {:gg "ff"} "mm.ll")
;; gives:
;; {:mm {:ll {:gg "ff"}}}

(enclose-map {:gg "ff"} "mm")
;; gives:
;; {:mm {:gg "ff"}}

(enclose-map {:gg "ff"} nil)
;; gives:
;; {:gg "ff"}
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L112">view source</a></div></div><div class="public anchor" id="var-exch-key"><h3>exch-key</h3><div class="usage"><code>(exch-key mp-id s)</code></div><div class="doc"><div class="markdown"><p>Returns the base key for the exchange path.</p>
<pre><code class="clojure">(exch-key  "foo" "bar.baz")
;; "foo@exchange@bar"
(exch-key "foo" "bar")
;; "foo@exchange@bar"
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L9">view source</a></div></div><div class="public anchor" id="var-from.21"><h3>from!</h3><div class="usage"><code>(from! mp-id m)</code></div><div class="doc"><div class="markdown"><p>Builds a map by replacing the values of the input map. The replacements are gathered from the <code>exchange</code> interface with the keys: <code>&lt;mp-id&gt;@exchange@&lt;input-map-value&gt;</code></p>
<p>Example key: <code>devhub@exchange@Vraw_block1</code> Example value: <code>[
                1,0,1,0,
                0,0,0,0,
                0,0,0,0,
                1,0,0,0,
                0,0,0,0,
                0,0,1,0
                ]</code> Return: <code>{:%stateblock1 [
                1,0,1,0,
                0,0,0,0,
                0,0,0,0,
                1,0,0,0,
                0,0,0,0,
                0,0,1,0
                ]}</code> </p>
<pre><code class="clojure">(from! "devhub" {
                  :%stateblock1 "Vraw_block1"
                  :%stateblock2 "Vraw_block2"
                  :%stateblock3 "Vraw_block3"
                  :%stateblock4 "Vraw_block4"
                  })
</code></pre>
<p><strong>Todo</strong></p>
<p>Check for non trivial <code>&lt;input-map-value&gt;</code> like <code>{:%aaa "bbb.ccc"}</code></p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L70">view source</a></div></div><div class="public anchor" id="var-key-.3Efirst-kw"><h3>key-&gt;first-kw</h3><div class="usage"><code>(key-&gt;first-kw s)</code></div><div class="doc"><div class="markdown"><p>Returns the keyword or nil.</p>
<pre><code class="clojure">(key-&gt;second-kw "foo" )
;; nil
(key-&gt;second-kw "foo.bar" )
;; :bar
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L38">view source</a></div></div><div class="public anchor" id="var-key-.3Esecond-kw"><h3>key-&gt;second-kw</h3><div class="usage"><code>(key-&gt;second-kw s)</code></div><div class="doc"><div class="markdown"><p>Returns the keyword or nil.</p>
<pre><code class="clojure">(key-&gt;second-kw "foo" )
;; nil
(key-&gt;second-kw "foo.bar" )
;; :bar
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L24">view source</a></div></div><div class="public anchor" id="var-ok.3F"><h3>ok?</h3><div class="usage"><code>(ok? mp-id k)</code></div><div class="doc"><div class="markdown"><p>Checks a certain exchange endpoint to evaluate to true</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L174">view source</a></div></div><div class="public anchor" id="var-read.21"><h3>read!</h3><div class="usage"><code>(read! mp-id p)</code></div><div class="doc"><div class="markdown"><p>Returns the <em>compare value</em> belonging to a <code>mp-id</code> and an ExchangePath <code>k</code>. Gets the <em>keyword</em> <code>kw</code> from <code>k</code> if <code>k</code> looks like this: <code>aaa.bbb</code>. If <code>kw</code> is not <code>nil</code> it is used to extract the related value.</p>
<pre><code class="clojure">(read! "ref" "A.Unit")
;; "Pa"
;; or:
(read! "devhub" "Vraw_block1")
;; [1 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0]
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L51">view source</a></div></div><div class="public anchor" id="var-run-if"><h3>run-if</h3><div class="usage"><code>(run-if {mp-id :MpName, k :RunIf})</code></div><div class="doc"><div class="markdown"><p>Checks if the exchange path given with <code>:MpName</code> and <code>:RunIf</code> evaluates to true.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L186">view source</a></div></div><div class="public anchor" id="var-stop-if"><h3>stop-if</h3><div class="usage"><code>(stop-if {mp-id :MpName, k :StopIf})</code></div><div class="doc"><div class="markdown"><p>Checks if the exchange path given with <code>:MpName</code> and <code>:StopIf</code> evaluates to true.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L180">view source</a></div></div><div class="public anchor" id="var-to.21"><h3>to!</h3><div class="usage"><code>(to! mp-id m p)</code><code>(to! mp-id m)</code></div><div class="doc"><div class="markdown"><p>Writes <code>m</code> to the exchange interface. The first level keys of <code>m</code> are used for the key. The return value of the storing process (e.g. “OK”) is converted to a <code>keyword</code>. After storing the amounts of <code>:OK</code> is compared to <code>(count m)</code>.</p>
<p>Example:</p>
<pre><code class="clojure">{:A 1
 :B 2}
</code></pre>
<p>Stores the value <code>1</code> under the key <code>&lt;mp-id&gt;@exchange@A</code> and a <code>2</code> under <code>&lt;mp-id&gt;@exchange@B</code>.</p>
<p>If a path <code>p</code> is given the <code>enclose-map</code> function respects <code>p</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/cmp/blob/master/src/cmp/exchange.clj#L138">view source</a></div></div></div></body></html>